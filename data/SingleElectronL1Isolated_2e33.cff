
 include "RecoEgamma/EgammaHLTProducers/data/l1IsoRecoEcalCandidate.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1IsolatedElectronHcalIsol.cff"
 
 include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronL1IsoSequenceForHLT.cff"
 include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronL1IsoTrackingSequenceForHLT.cff"

 include "RecoEgamma/EgammaHLTProducers/data/l1IsoElectronsRegionalRecoTracker.cff"	

 include "RecoEgamma/EgammaHLTProducers/data/l1IsoElectronTrackIsol.cff"


### include "RecoEgamma/EgammaHLTProducers/data/hltSingleElectronHcalIsol.cfi"
### include "RecoEgamma/EgammaHLTProducers/data/hltSingleElectronTrackIsol.cfi"

#----------- filter modules for the sequence --------------------------------#

#--------------------------------------------------------------------#
# L1 MATCH
#--------------------------------------------------------------------#
module hltL1IsoSingleL1MatchFilter = hltEgammaL1MatchFilterRegional from "HLTrigger/Egamma/data/hltEgammaL1MatchFilterRegional.cfi"

     replace hltL1IsoSingleL1MatchFilter.candIsolatedTag = l1IsoRecoEcalCandidate
     replace hltL1IsoSingleL1MatchFilter.L1SeedFilterTag = l1seedSingle

#--------------------------------------------------------------------#
# ET CUT
#--------------------------------------------------------------------#
include "HLTrigger/Egamma/data/hltEgammaEtFilter.cfi"
module hltL1IsoSingleElectronEtFilter = hltEgammaEtFilter from "HLTrigger/Egamma/data/hltEgammaEtFilter.cfi"

 replace hltL1IsoSingleElectronEtFilter.inputTag = hltL1IsoSingleL1MatchFilter
#      double etcut = 26.0
#      int32  ncandcut = 1


#--------------------------------------------------------------------#
# HCAL ISOL
#--------------------------------------------------------------------#
include "HLTrigger/Egamma/data/hltEgammaHcalIsolFilter.cfi"
module hltL1IsoSingleElectronHcalIsolFilter = hltEgammaHcalIsolFilter from "HLTrigger/Egamma/data/hltEgammaHcalIsolFilter.cfi"

 replace hltL1IsoSingleElectronHcalIsolFilter.candTag = hltL1IsoSingleElectronEtFilter
 replace hltL1IsoSingleElectronHcalIsolFilter.isoTag = l1IsolatedElectronHcalIsol
#      double hcalisolbarrelcut = 3.
#      double hcalisolendcapcut = 3.
#      int32 ncandcut = 1

#--------------------------------------------------------------------#
# PIXEL MATCH
#--------------------------------------------------------------------#
include "HLTrigger/Egamma/data/hltElectronPixelMatchFilter.cfi"
module hltL1IsoSingleElectronPixelMatchFilter = hltElectronPixelMatchFilter from "HLTrigger/Egamma/data/hltElectronPixelMatchFilter.cfi"

  replace hltL1IsoSingleElectronPixelMatchFilter.candTag = hltL1IsoSingleElectronHcalIsolFilter
  replace hltL1IsoSingleElectronPixelMatchFilter.L1IsoPixelmapbarrelTag = l1IsoElectronPixelSeeds:correctedHybridSuperClustersL1Isolated
  replace hltL1IsoSingleElectronPixelMatchFilter.L1IsoPixelmapendcapTag = l1IsoElectronPixelSeeds:correctedEndcapSuperClustersWithPreshowerL1Isolated
#      double   npixelmatchcut         = 1
#      int32    ncandcut               = 1

#--------------------------------------------------------------------#
# E OVER P
#--------------------------------------------------------------------#
 include "HLTrigger/Egamma/data/hltElectronEoverpFilter.cfi"
 module hltL1IsoSingleElectronEoverpFilter = hltElectronEoverpFilter from "HLTrigger/Egamma/data/hltElectronEoverpFilter.cfi"

 replace hltL1IsoSingleElectronEoverpFilter.candTag = hltL1IsoSingleElectronPixelMatchFilter
 replace hltL1IsoSingleElectronEoverpFilter.electronIsolatedProducer = pixelMatchElectronsL1IsoForHLT 
replace hltL1IsoSingleElectronEoverpFilter.doIsolated = true

#      double eoverpbarrelcut = 1.5
#      double eoverpendcapcut = 2.45
#      int32 ncandcut = 1

#--------------------------------------------------------------------#
# TRACK ISOL
#--------------------------------------------------------------------#
 include "HLTrigger/Egamma/data/hltElectronTrackIsolFilter.cfi"
 module hltL1IsoSingleElectronTrackIsolFilter = hltElectronTrackIsolFilter from "HLTrigger/Egamma/data/hltElectronTrackIsolFilter.cfi"

replace  hltL1IsoSingleElectronTrackIsolFilter.candTag  = hltL1IsoSingleElectronEoverpFilter
replace  hltL1IsoSingleElectronTrackIsolFilter.isoTag   = l1IsoElectronTrackIsol
#      double pttrackisolcut = 0.06
#      int32 ncandcut         = 1

#--------------------------------------------------------------------#
#--------------------------------------------------------------------#

  module singleElectronL1IsoPresc = HLTPrescaler {
         bool   makeFilterObject = true
         uint32 prescaleFactor = 1
         uint32 eventOffset    = 0
  }


### include "RecoLocalTracker/Configuration/data/RecoLocalTracker.cff"
### include "RecoLocalCalo/Configuration/data/RecoLocalCalo.cff"

  sequence singleElectronL1Isolated = {
	                           hltBegin& 
                                      ##doL1T &
                             l1seedSingle &
		 doRegionalEgammaEcal &
#	                  doLocalEcal &
                               l1IsolatedEcalClusters &
                               l1IsoRecoEcalCandidate &
                             hltL1IsoSingleL1MatchFilter &
                             hltL1IsoSingleElectronEtFilter &
                          doLocalHcalWithoutHO &
                               l1IsolatedElectronHcalIsol & 
                             hltL1IsoSingleElectronHcalIsolFilter &
                             ##### trackerlocalreco &              
                          doLocalPixel & // pixel rechit for SC-pixel matching
	                       pixelMatchElectronL1IsoSequenceForHLT & 
                             hltL1IsoSingleElectronPixelMatchFilter &
			  doLocalStrip & // strip rechit for the electron tracking
                               pixelMatchElectronL1IsoTrackingSequenceForHLT &
                             hltL1IsoSingleElectronEoverpFilter &	
                             //ckftracks & 
                               l1IsoElectronsRegionalRecoTracker & //// here the regional is obtained by
                                                           /// EgammaHLTRegionalPixelSeedGeneratorProducer
                               l1IsoElectronTrackIsol & 
                             hltL1IsoSingleElectronTrackIsolFilter &
                                                      
                             singleElectronL1IsoPresc
                            }

