
 include "RecoEgamma/EgammaHLTProducers/data/l1IsoRecoEcalCandidate.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsoRecoEcalCandidate.cff"

 include "RecoEgamma/EgammaHLTProducers/data/l1IsolatedElectronHcalIsol.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsolatedElectronHcalIsol.cff"
 
 include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronL1IsoSequenceForHLT.cff"
 include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronL1NonIsoSequenceForHLT.cff"

 include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronL1IsoTrackingSequenceForHLT.cff"
 include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronL1NonIsoTrackingSequenceForHLT.cff"

 include "RecoEgamma/EgammaHLTProducers/data/l1IsoEgammaRegionalRecoTracker.cff"	
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsoEgammaRegionalRecoTracker.cff"	

 include "RecoEgamma/EgammaHLTProducers/data/l1IsoElectronTrackIsol.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsoElectronTrackIsol.cff"


### include "RecoEgamma/EgammaHLTProducers/data/hltSingleElectronHcalIsol.cfi"
### include "RecoEgamma/EgammaHLTProducers/data/hltSingleElectronTrackIsol.cfi"

#----------- filter modules for the sequence --------------------------------#

#--------------------------------------------------------------------#
# L1 MATCH
#--------------------------------------------------------------------#
include "HLTrigger/Egamma/data/hltEgammaL1MatchFilter.cfi"
module hltL1NonIsoDoubleElectronL1MatchFilterRegional = hltEgammaL1MatchFilterRegional from "HLTrigger/Egamma/data/hltEgammaL1MatchFilterRegional.cfi" 

     replace hltL1NonIsoDoubleElectronL1MatchFilterRegional.candIsolatedTag = l1IsoRecoEcalCandidate
     replace hltL1NonIsoDoubleElectronL1MatchFilterRegional.candNonIsolatedTag = l1NonIsoRecoEcalCandidate

 #     InputTag l1Tag = l1extraParticles:Isolated
     replace  hltL1NonIsoDoubleElectronL1MatchFilterRegional.ncandcut = 2
     replace  hltL1NonIsoDoubleElectronL1MatchFilterRegional.doIsolated = false
#
#      double region_eta_size      = 0.522
#      double region_eta_size_ecap = 0.87
#      double region_phi_size      = 1.044
#      double barrel_end           = 1.4791
#      double endcap_end           = 2.5

#--------------------------------------------------------------------#
# ET CUT
#--------------------------------------------------------------------#
include "HLTrigger/Egamma/data/hltEgammaEtFilter.cfi"
module hltL1NonIsoDoubleElectronEtFilter = hltEgammaEtFilter from "HLTrigger/Egamma/data/hltEgammaEtFilter.cfi"

 replace hltL1NonIsoDoubleElectronEtFilter.inputTag = hltL1NonIsoDoubleElectronL1MatchFilterRegional
 #replace hltL1IsoDoubleElectronEtFilter.inputTag = hltL1IsoDoubleElectronL1MatchFilter
 replace hltL1NonIsoDoubleElectronEtFilter.etcut = 19.0
 replace hltL1NonIsoDoubleElectronEtFilter.ncandcut = 2


#--------------------------------------------------------------------#
# HCAL ISOL
#--------------------------------------------------------------------#
include "HLTrigger/Egamma/data/hltEgammaHcalIsolFilter.cfi"
module hltL1NonIsoDoubleElectronHcalIsolFilter = hltEgammaHcalIsolFilter from "HLTrigger/Egamma/data/hltEgammaHcalIsolFilter.cfi"

 replace hltL1NonIsoDoubleElectronHcalIsolFilter.candTag = hltL1NonIsoDoubleElectronEtFilter
 replace hltL1NonIsoDoubleElectronHcalIsolFilter.isoTag = l1IsolatedElectronHcalIsol
 replace hltL1NonIsoDoubleElectronHcalIsolFilter.nonIsoTag  = l1NonIsolatedElectronHcalIsol
 replace hltL1NonIsoDoubleElectronHcalIsolFilter.hcalisolbarrelcut = 9.
 replace hltL1NonIsoDoubleElectronHcalIsolFilter.hcalisolendcapcut = 9.
 replace hltL1NonIsoDoubleElectronHcalIsolFilter.ncandcut = 2
 replace hltL1NonIsoDoubleElectronHcalIsolFilter.doIsolated = false

#--------------------------------------------------------------------#
# PIXEL MATCH
#--------------------------------------------------------------------#
include "HLTrigger/Egamma/data/hltElectronPixelMatchFilter.cfi"
module hltL1NonIsoDoubleElectronPixelMatchFilter = hltElectronPixelMatchFilter from "HLTrigger/Egamma/data/hltElectronPixelMatchFilter.cfi"

  replace hltL1NonIsoDoubleElectronPixelMatchFilter.candTag = hltL1NonIsoDoubleElectronHcalIsolFilter
  replace hltL1NonIsoDoubleElectronPixelMatchFilter.pixelmapbarrelTag = l1IsoElectronPixelSeeds:correctedHybridSuperClustersL1Isolated
  replace hltL1NonIsoDoubleElectronPixelMatchFilter.pixelmapendcapTag = l1IsoElectronPixelSeeds:correctedEndcapSuperClustersWithPreshowerL1Isolated
#      double   npixelmatchcut         = 1
  replace hltL1NonIsoDoubleElectronPixelMatchFilter.ncandcut = 2

#--------------------------------------------------------------------#
# E OVER P !! HERE is not applyed and it is used to change 
#       the HLTFilterObjectWithRefs from RecoEcalCandidates to Electron
#--------------------------------------------------------------------#
 include "HLTrigger/Egamma/data/hltElectronEoverpFilter.cfi"
 module hltL1NonIsoDoubleElectronEoverpFilter = hltElectronEoverpFilter from "HLTrigger/Egamma/data/hltElectronEoverpFilter.cfi"

 replace hltL1NonIsoDoubleElectronEoverpFilter.candTag = hltL1NonIsoDoubleElectronPixelMatchFilter
 replace hltL1NonIsoDoubleElectronEoverpFilter.electronIsolatedProducer = pixelMatchElectronsL1IsoForHLT 
 replace hltL1NonIsoDoubleElectronEoverpFilter.electronNonIsolatedProducer = pixelMatchElectronsL1NonIsoForHLT 
  replace hltL1NonIsoDoubleElectronEoverpFilter.eoverpbarrelcut = 15000
  replace hltL1NonIsoDoubleElectronEoverpFilter.eoverpendcapcut = 24500
  replace hltL1NonIsoDoubleElectronEoverpFilter.ncandcut = 2
  replace hltL1NonIsoDoubleElectronEoverpFilter.doIsolated = false

#--------------------------------------------------------------------#
# TRACK ISOL
#--------------------------------------------------------------------#
 include "HLTrigger/Egamma/data/hltElectronTrackIsolFilter.cfi"
 module hltL1NonIsoDoubleElectronTrackIsolFilter = hltElectronTrackIsolFilter from "HLTrigger/Egamma/data/hltElectronTrackIsolFilter.cfi"

replace  hltL1NonIsoDoubleElectronTrackIsolFilter.candTag  = hltL1NonIsoDoubleElectronEoverpFilter
replace  hltL1NonIsoDoubleElectronTrackIsolFilter.isoTag   = l1IsoElectronTrackIsol
replace  hltL1NonIsoDoubleElectronTrackIsolFilter.nonIsoTag  = l1NonIsoElectronTrackIsol
replace  hltL1NonIsoDoubleElectronTrackIsolFilter.pttrackisolcut = 0.4
replace  hltL1NonIsoDoubleElectronTrackIsolFilter.ncandcut         = 2
replace  hltL1NonIsoDoubleElectronTrackIsolFilter.doIsolated = false

#--------------------------------------------------------------------#
#--------------------------------------------------------------------#

  module doubleElectronL1NonIsoPresc = HLTPrescaler {
         bool   makeFilterObject = true
         uint32 prescaleFactor = 1
         uint32 eventOffset    = 0
  }



  sequence doubleElectronL1NonIsolated = { 
                                      ##  doL1T &
                                        # was like thisl1seedDouble &
                                        l1seedRelaxedDouble &
                             ecalLocalRecoSequence &
                             l1IsolatedEcalClusters 
			   & l1NonIsolatedEcalClusters 
                           & l1IsoRecoEcalCandidate 
                           & l1NonIsoRecoEcalCandidate
                           & hltL1NonIsoDoubleElectronL1MatchFilterRegional
                           # hltL1IsoDoubleElectronL1MatchFilter
                           & hltL1NonIsoDoubleElectronEtFilter #attention Iso
                           & hcalLocalRecoSequence 
                           & l1IsolatedElectronHcalIsol 
                           & l1NonIsolatedElectronHcalIsol 

                           & hltL1NonIsoDoubleElectronHcalIsolFilter #attention Iso

                  ##### trackerlocalreco &         
	                   & pixeltrackerlocalreco     
	                   & pixelMatchElectronL1IsoSequenceForHLT
	                   & pixelMatchElectronL1NonIsoSequenceForHLT

                           & hltL1NonIsoDoubleElectronPixelMatchFilter
                           & striptrackerlocalreco 
                           & pixelMatchElectronL1IsoTrackingSequenceForHLT
                           & pixelMatchElectronL1NonIsoTrackingSequenceForHLT
                           & hltL1NonIsoDoubleElectronEoverpFilter
                  ##### ckftracks & 
                           & l1IsoEgammaRegionalRecoTracker
                           & l1NonIsoEgammaRegionalRecoTracker
                  ##### EgammaHLTRegionalPixelSeedGeneratorProducer
                           & l1IsoElectronTrackIsol
                           & l1NonIsoElectronTrackIsol
                           & hltL1NonIsoDoubleElectronTrackIsolFilter
                           & doubleElectronL1NonIsoPresc
                            }






